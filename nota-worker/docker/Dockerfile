FROM amazoncorretto:17

WORKDIR /app

COPY app.jar /app/nota-worker.jar

EXPOSE 8090

ENV SPRING_APPLICATION_NAME=nota-worker \
    SERVER_PORT=8090 \
    SPRING_RABBITMQ_LISTENER_SIMPLE_RETRY_ENABLED=true \
    SPRING_RABBITMQ_LISTENER_SIMPLE_RETRY_MAX-ATTEMPTS=3 \
    SPRING_RABBITMQ_LISTENER_SIMPLE_RETRY_INITIAL-INTERVAL=5000 \
    SPRING_RABBITMQ_LISTENER_SIMPLE_RETRY_MULTIPLIER=2.0

ENTRYPOINT ["java", "-jar", "/app/nota-worker.jar"]

CMD ["--server.port=8090"]
